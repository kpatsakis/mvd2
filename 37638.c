static brcmf_notify_connect_status(struct brcmf_if const struct brcmf_event_msg *e, void *data) struct brcmf_cfg80211_info * cfg = ifp -> drvr -> config ; struct net_device * ndev = ifp -> ndev ; if ( brcmf_is_apmode ( ifp -> vif ) )  static bool brcmf_is_apmode(struct brcmf_cfg80211_vif *vif) enum nl80211_iftype iftype ; iftype = vif -> wdev . iftype; return iftype == NL80211_IFTYPE_AP || iftype == NL80211_IFTYPE_P2P_GO ; err = brcmf_notify_connect_status_ap ( cfg , ndev , e , data ); static brcmf_notify_connect_status_ap(struct brcmf_cfg80211_info struct net_device const struct brcmf_event_msg *e, void *data) u32 event = e -> event_code ; u32 reason = e -> reason ; struct station_info sinfo ; if ( event == BRCMF_E_LINK && reason == BRCMF_E_REASON_LINK_BSSCFG_DIS && ndev != cfg_to_ndev ( cfg ) )  if ( ( ( event == BRCMF_E_ASSOC_IND ) || ( event == BRCMF_E_REASSOC_IND ) ) && ( reason == BRCMF_E_STATUS_SUCCESS ) )  memset ( & sinfo , 0 , sizeof ( sinfo ) ); sinfo . assoc_req_ies = data; sinfo . assoc_req_ies_len = e -> datalen; sinfo . generation = generation; cfg80211_new_sta ( ndev , e -> addr , & sinfo , GFP_KERNEL ); 