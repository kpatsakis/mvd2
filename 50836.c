static void mux_chr_read(void *opaque, const uint8_t *buf, int size) CharDriverState * chr = opaque ; MuxDriver * d = chr -> opaque ; int i ; for(i = 0; i < size; i++) if ( mux_proc_byte ( chr , d , buf [ i ] ) )  static int mux_proc_byte(CharDriverState *chr, MuxDriver *d, int ch) if ( d -> term_got_escape )  if ( ch == term_escape_char )  switch ( ch )  const char * term = "QEMU: Terminated\n\r" ; chr -> chr_write ( chr , ( uint8_t * ) term , strlen ( term ) ); 