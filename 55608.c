static void sysbus_esp_gpio_demux(void *opaque, int irq, int level) SysBusESPState * sysbus = ESP ( opaque ) ; ESPState * s = & sysbus -> esp ; switch ( irq )  parent_esp_reset ( s , irq , level ); static void parent_esp_reset(ESPState *s, int irq, int level) if ( level )  esp_soft_reset ( s ); static void esp_soft_reset(ESPState *s) esp_hard_reset ( s ); void esp_hard_reset(ESPState *s) memset ( s -> rregs , 0 , ESP_REGS ); memset ( s -> wregs , 0 , ESP_REGS ); s -> tchi_written = 0; s -> ti_size = 0; s -> ti_rptr = 0; s -> ti_wptr = 0; s -> dma = 0; s -> do_cmd = 0; s -> dma_cb = NULL; s -> rregs [ ESP_CFG1 ] = 7; 