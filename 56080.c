 ClearDataSourceSurface(DataSourceSurface *aSurface) DataSourceSurface :: MappedSurface map ; if ( ! aSurface -> Map ( DataSourceSurface :: MapType :: WRITE , & map ) )  uint32_t width = aSurface -> GetSize ( ) . width ; uint32_t bytesPerRow = width * BytesPerPixel ( aSurface -> GetFormat ( ) ) ; uint8_t * row = map . mData ; uint8_t * end = row + size_t ( map . mStride ) * size_t ( aSurface -> GetSize ( ) . height ) ; while ( row != end )  memset ( row , 0 , bytesPerRow ); row += map . mStride; 