void ConvertHTMLtoUCS2(guchar * data, int32_t char16_t** unicodeData, int32_t& outUnicodeLen) nsAutoCString charset ; if ( charset . EqualsLiteral ( "UTF-16" ) )  outUnicodeLen = ( dataLength / 2 ) - 1; * unicodeData = reinterpret_cast < char16_t * > if ( * unicodeData )  memcpy ( * unicodeData , data + sizeof ( char16_t ) , outUnicodeLen * sizeof ( char16_t ) ); ( * unicodeData ) [ outUnicodeLen ] = '\0'; decoder -> GetMaxLength ( ( const char * ) data , dataLength , & outUnicodeLen ); if ( outUnicodeLen )  moz_xmalloc ( ( outUnicodeLen + sizeof ( '\0' ) ) * sizeof ( char16_t ) ); if ( * unicodeData )  decoder -> Convert ( ( const char * ) data , & numberTmp , * unicodeData , & outUnicodeLen ); ( * unicodeData ) [ outUnicodeLen ] = '\0'; 