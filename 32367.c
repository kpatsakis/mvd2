static void scsi_dma_restart_bh(void *opaque) SCSIRequest * req , * next ; if ( req -> retry )  req -> retry = false; switch ( req -> cmd . mode )  scsi_req_dequeue ( req ); static void scsi_req_dequeue(SCSIRequest *req) req -> retry = false; if ( req -> enqueued )  req -> enqueued = false; scsi_req_unref ( req ); void scsi_req_unref(SCSIRequest *req) assert ( req -> refcount > 0 ); 