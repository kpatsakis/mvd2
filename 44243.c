ram_addr_t qemu_ram_alloc(ram_addr_t size, MemoryRegion *mr) return qemu_ram_alloc_from_ptr ( size , NULL , mr ) ; ram_addr_t qemu_ram_alloc_from_ptr(ram_addr_t size, void MemoryRegion *mr) RAMBlock * block , * new_block ; size = TARGET_PAGE_ALIGN ( size ); new_block = g_malloc0 ( sizeof ( * new_block ) ); new_block -> mr = mr; new_block -> offset = find_ram_offset ( size ); static ram_addr_t find_ram_offset(ram_addr_t size) assert ( size != 0 ); 