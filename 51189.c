static int planarCopyWrapper(SwsContext *c, const uint8_t int srcStride[], int srcSliceY, int uint8_t *dst[], int dstStride[]) int plane , i , j ; for (plane = 0; plane < 4; plane++) int length = ( plane == 0 || plane == 3 ) ? c -> srcW : FF_CEIL_RSHIFT ( c -> srcW , c -> chrDstHSubSample ) ; int y = ( plane == 0 || plane == 3 ) ? srcSliceY : FF_CEIL_RSHIFT ( srcSliceY , c -> chrDstVSubSample ) ; int height = ( plane == 0 || plane == 3 ) ? srcSliceH : FF_CEIL_RSHIFT ( srcSliceH , c -> chrDstVSubSample ) ; if ( ! dst [ plane ] )  if ( plane == 1 && ! dst [ 2 ] )  if ( ! src [ plane ] || ( plane == 1 && ! src [ 2 ] ) )  if ( is16BPS ( c -> dstFormat ) || isNBPS ( c -> dstFormat ) )  fillPlane ( dst [ plane ] , dstStride [ plane ] , length , height , y , ( plane == 3 ) ? 255 : 128 ); static void fillPlane(uint8_t *plane, int stride, int width, int height, int uint8_t val) int i ; uint8_t * ptr = plane + stride * y ; for (i = 0; i < height; i++) memset ( ptr , val , width ); ptr += stride; 