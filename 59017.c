 nsLinebreakHelpers :: ConvertPlatformToDOMLinebreaks ( const char* inFlavor, void** int32_t* ioLengthInBytes ) if ( ! ( ioData && * ioData && ioLengthInBytes ) )  if ( strcmp ( inFlavor , "text/plain" ) == 0 )  char * buffAsChars = reinterpret_cast < char * > * ioData retVal = nsLinebreakConverter :: ConvertLineBreaksInSitu ( & buffAsChars , nsLinebreakConverter :: eLinebreakAny , nsLinebreakConverter :: eLinebreakContent , * ioLengthInBytes , ioLengthInBytes ); if ( NS_SUCCEEDED ( retVal ) )  * ioData = buffAsChars; if ( strcmp ( inFlavor , "image/jpeg" ) == 0 )  char16_t * buffAsUnichar = reinterpret_cast < char16_t * > * ioData char16_t * oldBuffer = buffAsUnichar ; retVal = nsLinebreakConverter :: ConvertUnicharLineBreaksInSitu ( & buffAsUnichar , nsLinebreakConverter :: eLinebreakAny , nsLinebreakConverter :: eLinebreakContent , * ioLengthInBytes / sizeof ( char16_t ) , & newLengthInChars ); if ( NS_SUCCEEDED ( retVal ) )  if ( buffAsUnichar != oldBuffer )  free ( oldBuffer ); 